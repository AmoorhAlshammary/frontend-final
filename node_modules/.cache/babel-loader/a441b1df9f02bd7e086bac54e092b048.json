{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\laser\\\\Desktop\\\\project final\\\\frontend-final\\\\src\\\\components\\\\OneDecoration.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction OneDecoration(_ref) {\n  _s();\n\n  let {\n    token,\n    user\n  } = _ref;\n  const {\n    id\n  } = useParams(); //console.log(id);\n\n  const [decorationId, setDecorationId] = useState('');\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [price, setPrice] = useState(0);\n  const [img, setImg] = useState('');\n  const [reservation, setReservation] = useState(null);\n  const history = useHistory();\n  useEffect(() => {\n    // console.log('use effect')\n    const getOneDecoration = async () => {\n      if (token) {\n        // console.log(\"kkkkkk\");\n        const response = await axios.get(`http://localhost:5000/decoration/${id}`, {\n          headers: {\n            authorization: `Bearer ${token}`\n          }\n        }); // console.log(response.data);\n\n        setDecorationId(response.data.oneDecoration._id);\n        setName(response.data.oneDecoration.name);\n        setDescription(response.data.oneDecoration.description);\n        setImg(response.data.oneDecoration.img);\n        setPrice(response.data.oneDecoration.price);\n        setReservation(response.data.reservation);\n      } else {\n        history.push('/login');\n      }\n    };\n\n    getOneDecoration();\n  }, []);\n\n  const postReserve = async () => {\n    // console.log(decorationId, user._id)\n    try {\n      const response = await axios.post(\"http://localhost:5000/reservation\", {\n        decorationId: decorationId,\n        userId: user._id,\n        date: new Date()\n      }, {\n        headers: {\n          authorization: `Bearer ${token}`\n        }\n      }); // console.log(response)\n\n      history.push(`/reservation/user/view`);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const cancelReservation = async () => {\n    try {\n      const response = await axios.delete(`http://localhost:5000/reservation/${reservation._id}`, {\n        headers: {\n          authorization: `Bearer ${token}`\n        }\n      }); // console.log(response)\n\n      history.push('/decoration');\n    } catch (error) {\n      console.log(error);\n    }\n  }; // admin functions\n\n\n  const updateDecoration = async () => {\n    try {\n      const response = await axios.put('http://localhost:5000/decoration', {\n        id: decorationId,\n        name,\n        description,\n        img,\n        price\n      }, {\n        headers: {\n          authorization: `Bearer ${token}`\n        }\n      });\n\n      if (response.status === 201) {\n        // show alert update done\n        alert(`Decoration : ${name} updated successfully`);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const deleteDecoration = async () => {\n    try {\n      const response = await axios.delete(`http://localhost:5000/decoration/${decorationId}`, {\n        headers: {\n          authorization: `Bearer ${token}`\n        }\n      });\n\n      if (response.status === 201) {\n        // show alert update done\n        alert(`Decoration : ${response.data.name} deleted successfully with all reservations`);\n        history.push('/decoration');\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: user.isAdmin ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card m-2\",\n      style: {\n        width: 300\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: img,\n        className: \"card-img-top\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Update Decoration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"card-title\",\n          children: [\"Name: \", name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [\"Description: \", description]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [\"Price: \", price, \" SR\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control mb-2\",\n          placeholder: \"Name\",\n          onChange: e => setName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control mb-2\",\n          placeholder: \"Decoration\",\n          onChange: e => setDescription(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control mb-2\",\n          placeholder: \"Image URL\",\n          onChange: e => setImg(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          className: \"form-control mb-2\",\n          placeholder: \"price\",\n          onChange: e => setPrice(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success m-2\",\n          onClick: () => updateDecoration(),\n          children: \"UPDATE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-danger\",\n          onClick: () => deleteDecoration(),\n          children: \"DELETE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 19\n    }, this) :\n    /*#__PURE__*/\n    // https://getbootstrap.com/docs/5.1/components/card/\n    _jsxDEV(\"div\", {\n      className: \"card m-2\",\n      style: {\n        width: 300\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: img,\n        className: \"card-img-top\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"card-title\",\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [price, \" SR\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 23\n        }, this), reservation ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-dark\",\n          onClick: () => cancelReservation(),\n          children: \"CANCEL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-info\",\n          onClick: () => postReserve(),\n          children: \"RESERVE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 19\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n}\n\n_s(OneDecoration, \"+PrWuXHGCa95MtT1xf/Z/YtgeCg=\", false, function () {\n  return [useParams, useHistory];\n});\n\n_c = OneDecoration;\nexport default OneDecoration;\n\nvar _c;\n\n$RefreshReg$(_c, \"OneDecoration\");","map":{"version":3,"sources":["C:/Users/laser/Desktop/project final/frontend-final/src/components/OneDecoration.js"],"names":["useEffect","useState","useHistory","useParams","axios","OneDecoration","token","user","id","decorationId","setDecorationId","name","setName","description","setDescription","price","setPrice","img","setImg","reservation","setReservation","history","getOneDecoration","response","get","headers","authorization","data","oneDecoration","_id","push","postReserve","post","userId","date","Date","error","console","log","cancelReservation","delete","updateDecoration","put","status","alert","deleteDecoration","isAdmin","width","e","target","value"],"mappings":";;;AAAA,SAAQA,SAAR,EAAmBC,QAAnB,QAAkC,OAAlC;AACA,SAASC,UAAT,EAAqBC,SAArB,QAAsC,kBAAtC;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAGA,SAASC,aAAT,OAAsC;AAAA;;AAAA,MAAf;AAACC,IAAAA,KAAD;AAAQC,IAAAA;AAAR,GAAe;AAClC,QAAM;AAAEC,IAAAA;AAAF,MAASL,SAAS,EAAxB,CADkC,CAElC;;AAEA,QAAM,CAACM,YAAD,EAAeC,eAAf,IAAkCT,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACU,IAAD,EAAOC,OAAP,IAAkBX,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACY,WAAD,EAAcC,cAAd,IAAgCb,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACc,KAAD,EAAQC,QAAR,IAAoBf,QAAQ,CAAC,CAAD,CAAlC;AACA,QAAM,CAACgB,GAAD,EAAMC,MAAN,IAAgBjB,QAAQ,CAAC,EAAD,CAA9B;AAGA,QAAM,CAACkB,WAAD,EAAcC,cAAd,IAAgCnB,QAAQ,CAAC,IAAD,CAA9C;AAEA,QAAMoB,OAAO,GAAGnB,UAAU,EAA1B;AAEAF,EAAAA,SAAS,CAAC,MAAK;AACb;AACA,UAAMsB,gBAAgB,GAAG,YAAU;AAC/B,UAAGhB,KAAH,EAAS;AACP;AACA,cAAMiB,QAAQ,GAAG,MAAMnB,KAAK,CAACoB,GAAN,CAAW,oCAAmChB,EAAG,EAAjD,EAAoD;AAAEiB,UAAAA,OAAO,EAAE;AAAEC,YAAAA,aAAa,EAAG,UAASpB,KAAM;AAAjC;AAAX,SAApD,CAAvB,CAFO,CAGP;;AACAI,QAAAA,eAAe,CAACa,QAAQ,CAACI,IAAT,CAAcC,aAAd,CAA4BC,GAA7B,CAAf;AACAjB,QAAAA,OAAO,CAACW,QAAQ,CAACI,IAAT,CAAcC,aAAd,CAA4BjB,IAA7B,CAAP;AACAG,QAAAA,cAAc,CAACS,QAAQ,CAACI,IAAT,CAAcC,aAAd,CAA4Bf,WAA7B,CAAd;AACAK,QAAAA,MAAM,CAACK,QAAQ,CAACI,IAAT,CAAcC,aAAd,CAA4BX,GAA7B,CAAN;AACAD,QAAAA,QAAQ,CAACO,QAAQ,CAACI,IAAT,CAAcC,aAAd,CAA4Bb,KAA7B,CAAR;AAEAK,QAAAA,cAAc,CAACG,QAAQ,CAACI,IAAT,CAAcR,WAAf,CAAd;AAED,OAZD,MAYK;AACHE,QAAAA,OAAO,CAACS,IAAR,CAAa,QAAb;AACD;AACJ,KAhBD;;AAiBER,IAAAA,gBAAgB;AACnB,GApBQ,EAoBN,EApBM,CAAT;;AAwBA,QAAMS,WAAW,GAAG,YAAY;AAC9B;AACE,QAAI;AAEF,YAAMR,QAAQ,GAAG,MAAMnB,KAAK,CAAC4B,IAAN,CAAW,mCAAX,EAAgD;AACrEvB,QAAAA,YAAY,EAAEA,YADuD;AAErEwB,QAAAA,MAAM,EAAE1B,IAAI,CAACsB,GAFwD;AAGrEK,QAAAA,IAAI,EAAE,IAAIC,IAAJ;AAH+D,OAAhD,EAKrB;AAAEV,QAAAA,OAAO,EAAE;AAAEC,UAAAA,aAAa,EAAG,UAASpB,KAAM;AAAjC;AAAX,OALqB,CAAvB,CAFE,CASF;;AACAe,MAAAA,OAAO,CAACS,IAAR,CAAc,wBAAd;AACD,KAXD,CAWE,OAAOM,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACJ,GAhBD;;AAkBA,QAAMG,iBAAiB,GAAG,YAAY;AAClC,QAAI;AAEF,YAAMhB,QAAQ,GAAG,MAAMnB,KAAK,CAACoC,MAAN,CAAc,qCAAoCrB,WAAW,CAACU,GAAI,EAAlE,EACrB;AAAEJ,QAAAA,OAAO,EAAE;AAAEC,UAAAA,aAAa,EAAG,UAASpB,KAAM;AAAjC;AAAX,OADqB,CAAvB,CAFE,CAKF;;AACAe,MAAAA,OAAO,CAACS,IAAR,CAAa,aAAb;AACD,KAPD,CAOE,OAAOM,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACJ,GAXD,CAzDkC,CAuElC;;;AACA,QAAMK,gBAAgB,GAAG,YAAU;AACjC,QAAI;AACF,YAAMlB,QAAQ,GAAG,MAAMnB,KAAK,CAACsC,GAAN,CAAU,kCAAV,EAA6C;AAClElC,QAAAA,EAAE,EAAEC,YAD8D;AAElEE,QAAAA,IAFkE;AAGlEE,QAAAA,WAHkE;AAIlEI,QAAAA,GAJkE;AAKlEF,QAAAA;AALkE,OAA7C,EAOvB;AAACU,QAAAA,OAAO,EAAE;AAACC,UAAAA,aAAa,EAAG,UAASpB,KAAM;AAAhC;AAAV,OAPuB,CAAvB;;AASA,UAAGiB,QAAQ,CAACoB,MAAT,KAAkB,GAArB,EAAyB;AACvB;AACAC,QAAAA,KAAK,CAAE,gBAAejC,IAAK,uBAAtB,CAAL;AACD;AACF,KAdD,CAcE,OAAOyB,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF,GAlBD;;AAmBA,QAAMS,gBAAgB,GAAG,YAAU;AACjC,QAAI;AACF,YAAMtB,QAAQ,GAAG,MAAMnB,KAAK,CAACoC,MAAN,CAAc,oCAAmC/B,YAAa,EAA9D,EACvB;AAACgB,QAAAA,OAAO,EAAE;AAACC,UAAAA,aAAa,EAAG,UAASpB,KAAM;AAAhC;AAAV,OADuB,CAAvB;;AAGA,UAAGiB,QAAQ,CAACoB,MAAT,KAAkB,GAArB,EAAyB;AACvB;AACAC,QAAAA,KAAK,CAAE,gBAAerB,QAAQ,CAACI,IAAT,CAAchB,IAAK,6CAApC,CAAL;AACAU,QAAAA,OAAO,CAACS,IAAR,CAAa,aAAb;AACD;AACF,KATD,CASE,OAAOM,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF,GAbD;;AAeA,sBACI;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA,cACS7B,IAAI,CAACuC,OAAL,gBACC;AAAK,MAAA,SAAS,EAAC,UAAf;AAA0B,MAAA,KAAK,EAAE;AAACC,QAAAA,KAAK,EAAE;AAAR,OAAjC;AAAA,8BACE;AAAK,QAAA,GAAG,EAAE9B,GAAV;AAAe,QAAA,SAAS,EAAC,cAAzB;AAAwC,QAAA,GAAG,EAAC;AAA5C;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAI,UAAA,SAAS,EAAC,YAAd;AAAA,+BAAkCN,IAAlC;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eAGE;AAAG,UAAA,SAAS,EAAC,WAAb;AAAA,sCAAuCE,WAAvC;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHF,eAIE;AAAG,UAAA,SAAS,EAAC,WAAb;AAAA,gCAAiCE,KAAjC;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJF,eAKE;AAAO,UAAA,IAAI,EAAC,MAAZ;AAAmB,UAAA,SAAS,EAAC,mBAA7B;AAAiD,UAAA,WAAW,EAAC,MAA7D;AAAoE,UAAA,QAAQ,EAAGiC,CAAD,IAAMpC,OAAO,CAACoC,CAAC,CAACC,MAAF,CAASC,KAAV;AAA3F;AAAA;AAAA;AAAA;AAAA,gBALF,eAME;AAAO,UAAA,IAAI,EAAC,MAAZ;AAAmB,UAAA,SAAS,EAAC,mBAA7B;AAAiD,UAAA,WAAW,EAAC,YAA7D;AAA0E,UAAA,QAAQ,EAAGF,CAAD,IAAMlC,cAAc,CAACkC,CAAC,CAACC,MAAF,CAASC,KAAV;AAAxG;AAAA;AAAA;AAAA;AAAA,gBANF,eAOE;AAAO,UAAA,IAAI,EAAC,MAAZ;AAAmB,UAAA,SAAS,EAAC,mBAA7B;AAAiD,UAAA,WAAW,EAAC,WAA7D;AAAyE,UAAA,QAAQ,EAAGF,CAAD,IAAM9B,MAAM,CAAC8B,CAAC,CAACC,MAAF,CAASC,KAAV;AAA/F;AAAA;AAAA;AAAA;AAAA,gBAPF,eAQE;AAAO,UAAA,IAAI,EAAC,QAAZ;AAAqB,UAAA,SAAS,EAAC,mBAA/B;AAAmD,UAAA,WAAW,EAAC,OAA/D;AAAuE,UAAA,QAAQ,EAAGF,CAAD,IAAMhC,QAAQ,CAACgC,CAAC,CAACC,MAAF,CAASC,KAAV;AAA/F;AAAA;AAAA;AAAA;AAAA,gBARF,eASE;AAAQ,UAAA,SAAS,EAAC,qBAAlB;AAAwC,UAAA,OAAO,EAAE,MAAIT,gBAAgB,EAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBATF,eAUE;AAAQ,UAAA,SAAS,EAAC,gBAAlB;AAAmC,UAAA,OAAO,EAAE,MAAII,gBAAgB,EAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADD;AAAA;AAiBC;AACA;AAAK,MAAA,SAAS,EAAC,UAAf;AAA0B,MAAA,KAAK,EAAE;AAACE,QAAAA,KAAK,EAAE;AAAR,OAAjC;AAAA,8BACE;AAAK,QAAA,GAAG,EAAE9B,GAAV;AAAe,QAAA,SAAS,EAAC,cAAzB;AAAwC,QAAA,GAAG,EAAC;AAA5C;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,YAAd;AAAA,oBAA4BN;AAA5B;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAG,UAAA,SAAS,EAAC,WAAb;AAAA,oBAA0BE;AAA1B;AAAA;AAAA;AAAA;AAAA,gBAFF,eAGE;AAAG,UAAA,SAAS,EAAC,WAAb;AAAA,qBAA0BE,KAA1B;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHF,EAIGI,WAAW,gBACV;AAAQ,UAAA,SAAS,EAAC,cAAlB;AAAiC,UAAA,OAAO,EAAG,MAAIoB,iBAAiB,EAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADU,gBAGV;AAAQ,UAAA,SAAS,EAAC,cAAlB;AAAiC,UAAA,OAAO,EAAG,MAAIR,WAAW,EAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAnBV;AAAA;AAAA;AAAA;AAAA,UADJ;AAoCH;;GA9IQ1B,a;UACUF,S,EAYCD,U;;;KAbXG,a;AAgJT,eAAeA,aAAf","sourcesContent":["import {useEffect, useState} from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport axios from 'axios';\n\n\nfunction OneDecoration({token, user}) {\n    const { id } = useParams();\n    //console.log(id);\n\n    const [decorationId, setDecorationId] = useState('')\n    const [name, setName] = useState('')\n    const [description, setDescription] = useState('')\n    const [price, setPrice] = useState(0)\n    const [img, setImg] = useState('')\n\n\n    const [reservation, setReservation] = useState(null);\n\n    const history = useHistory();\n\n    useEffect(()=> {\n      // console.log('use effect')\n      const getOneDecoration = async ()=>{\n          if(token){\n            // console.log(\"kkkkkk\");\n            const response = await axios.get(`http://localhost:5000/decoration/${id}`, { headers: { authorization: `Bearer ${token}` } });\n            // console.log(response.data);\n            setDecorationId(response.data.oneDecoration._id);\n            setName(response.data.oneDecoration.name);\n            setDescription(response.data.oneDecoration.description);\n            setImg(response.data.oneDecoration.img);\n            setPrice(response.data.oneDecoration.price);\n\n            setReservation(response.data.reservation);\n            \n          }else{\n            history.push('/login');\n          }\n      }\n        getOneDecoration();\n    }, []);\n\n\n\n    const postReserve = async () => {\n      // console.log(decorationId, user._id)\n        try {\n      \n          const response = await axios.post(\"http://localhost:5000/reservation\", {\n            decorationId: decorationId,\n            userId: user._id,\n            date: new Date()\n          },\n            { headers: { authorization: `Bearer ${token}` } }\n          )\n          // console.log(response)\n          history.push(`/reservation/user/view`)\n        } catch (error) {\n          console.log(error)\n        }\n    }\n\n    const cancelReservation = async () => {\n        try {\n  \n          const response = await axios.delete(`http://localhost:5000/reservation/${reservation._id}`,\n            { headers: { authorization: `Bearer ${token}` } }\n          )\n          // console.log(response)\n          history.push('/decoration')\n        } catch (error) {\n          console.log(error)\n        }\n    }\n\n\n    // admin functions\n    const updateDecoration = async ()=>{\n      try {\n        const response = await axios.put('http://localhost:5000/decoration',{\n          id: decorationId,\n          name,\n          description,\n          img,\n          price\n        },\n        {headers: {authorization: `Bearer ${token}`}}\n        )\n        if(response.status===201){\n          // show alert update done\n          alert(`Decoration : ${name} updated successfully`)\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    const deleteDecoration = async ()=>{\n      try {\n        const response = await axios.delete(`http://localhost:5000/decoration/${decorationId}`,\n        {headers: {authorization: `Bearer ${token}`}}\n        )\n        if(response.status===201){\n          // show alert update done\n          alert(`Decoration : ${response.data.name} deleted successfully with all reservations`)\n          history.push('/decoration')\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n \n    return (\n        <div className='container'>\n                {user.isAdmin ?\n                  <div className=\"card m-2\" style={{width: 300}}>\n                    <img src={img} className=\"card-img-top\" alt=\"\" />\n                    <div className=\"card-body\">\n                      <h3>Update Decoration</h3>\n                      <h5 className=\"card-title\">Name: {name}</h5>\n                      <p className=\"card-text\">Description: {description}</p>\n                      <p className=\"card-text\">Price: {price} SR</p>\n                      <input type=\"text\" className=\"form-control mb-2\" placeholder='Name' onChange={(e)=> setName(e.target.value)} />\n                      <input type=\"text\" className=\"form-control mb-2\" placeholder='Decoration' onChange={(e)=> setDescription(e.target.value)} />\n                      <input type=\"text\" className=\"form-control mb-2\" placeholder='Image URL' onChange={(e)=> setImg(e.target.value)} />\n                      <input type=\"number\" className=\"form-control mb-2\" placeholder='price' onChange={(e)=> setPrice(e.target.value)} />\n                      <button className='btn btn-success m-2' onClick={()=>updateDecoration()}>UPDATE</button>\n                      <button className='btn btn-danger' onClick={()=>deleteDecoration()}>DELETE</button>\n                    </div>\n                  </div>\n                  :\n                  // https://getbootstrap.com/docs/5.1/components/card/\n                  <div className=\"card m-2\" style={{width: 300}}>\n                    <img src={img} className=\"card-img-top\" alt=\"\" />\n                    <div className=\"card-body\">\n                      <h5 className=\"card-title\">{name}</h5>\n                      <p className=\"card-text\">{description}</p>\n                      <p className=\"card-text\">{price} SR</p>\n                      {reservation ? \n                        <button className='btn btn-dark' onClick={ ()=>cancelReservation() }>CANCEL</button> \n                        :\n                        <button className='btn btn-info' onClick={ ()=>postReserve() }>RESERVE</button>\n                      }\n                    </div>\n                  </div>\n                }\n        </div>\n    )\n}\n\nexport default OneDecoration\n"]},"metadata":{},"sourceType":"module"}